var bca=bca||{};!function(e){e.config={apiPath:"/api/bca"},e.modules={validations:{}},e.modules.validations.email=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},e.modules.url={},e.modules.url.parseQueryString=function(e){for(var a=e.split("&"),t=$.map(a,function(e,a){return e.split("=")[0]}),n={},i=0;i<a.length;i++){var o=a[i],r=o.split("=")[0],l=o.split("=")[1];if(r){var s=function(e){for(var a=0,n=0;n<t.length;n++)t[n]==e&&a++;return a}(r)>1;!n[r]&&s&&(n[r]=[]),s?n[r].push(l):n[r]=l}}return n},e.modules.pagination={},e.modules.pagination.handleClick=function(e,a="body"){$(a).find(".a-pagination_item a").off("click").on("click",e)},e.modules.subscribe={init:function(){$("#email-subs-form").off("submit").on("submit",function(){var a=$("#email-subs"),t=a.val(),n=e.modules.validations.email(t),i=$(".email-subs-data");if($(".email-subs").text(""),n){$(".subscribe-btn").parent().attr("disabled","disabled"),$(".subscribe-btn").addClass("hide"),$(".footer-submit-btn #subscribe-loader").addClass("is-active");var o=$(".footer-content.footer-content-subscribe").data("captchatype"),r=$(".footer-content.footer-content-subscribe").data("action"),l=$('meta[name="siteverification"]').attr("content");$.ajax({type:"POST",url:e.config.apiPath+"/forms_bca/subscribe",data:{entity:{Email:t,PageId:i.find(".pageid").text(),PageUrl:i.find(".pageurl").text()},formatId:i.find(".mailformat").text(),verifyId:i.find(".linkverify").text(),tokenRange:i.find(".tokenrange").text()},beforeSend:function(a,t){return e.modules.recaptcha.ajax.beforeSend(a,t,{captchatype:o,sitekey:l,action:r})},success:function(e){if(e.IsValid){$(".email-subs").removeClass("is-invalid").addClass("is-valid").text(i.find(".success").text()),a.val("");var t=i.find(".link a").attr("href");t&&(window.location=t)}else 4===e.ResultType?$(".email-subs").removeClass("is-valid").addClass("is-invalid").text(i.find(".exists").text()):$(".email-subs").removeClass("is-valid").addClass("is-invalid").html(e.Message.replace(/\n/g,"<br/>"))},error:function(e,a,t){$(".email-subs").removeClass("is-valid").addClass("is-invalid").html("Not Authorized")},complete:function(e,a){$(".footer-submit-btn #subscribe-loader").removeClass("is-active"),$(".subscribe-btn").removeClass("hide"),$(".subscribe-btn").parent().removeAttr("disabled")}})}else $(".email-subs").removeClass("is-valid").addClass("is-invalid").text(i.find(".error").text());return!1})}},e.modules.googlemaps={context:null,map:null,markerBounds:null,defaultCenter:{lat:-6.1971113,lng:106.8227999},infoWindows:[],markers:[],markerCluster:null,directionsRenderer:null,directionsService:null,iconBase:"../img/icons/",icons:{atm:{icon:"../img/icons/location-pin.svg"},branch:{icon:"../img/map/location-branch.svg"},weekendbanking:{icon:"../img/map/location-weekend-banking.svg"}}},e.modules.googlemaps.getMarkers=function(){var a=e.modules.googlemaps;return a.context?(a.markers[a.context]||(a.markers[a.context]=[]),a.infoWindows[a.context]||(a.infoWindows[a.context]=[]),a.markers[a.context]):a.markers},e.modules.googlemaps.getInfoWindows=function(){var a=e.modules.googlemaps;return a.context?(a.infoWindows[a.context]||(a.infoWindows[a.context]=[]),a.infoWindows[a.context]):a.infoWindows},e.modules.googlemaps.addMarkerContext=function(a){e.modules.googlemaps.getMarkers().push(a)},e.modules.googlemaps.resetMarkerContext=function(a=0){var t=e.modules.googlemaps;t.context&&0==a?(t.markers[t.context]=[],t.infoWindows[t.context]=[]):(t.markers=[],t.infoWindows=[])},e.modules.googlemaps.createMark=function(a){var t=e.modules.googlemaps,n=t.getMarkers(),i={lat:parseFloat(a.lat),lng:parseFloat(a.long)};t.markerBounds.extend(new google.maps.LatLng(i.lat,i.lng)),a.element&&$(a.element).find(".a-text-subtitle, .a-text-body").on("click",function(){for(var a=$(this).parents(".m-maps-location-container-wrapper").data(),t=0;t<n.length;t++){var o=n[t],r=o.getPosition().lat(),l=o.getPosition().lng();i.lat==r&&i.lng==l&&o.getTitle()==a.title&&(new google.maps.event.trigger(o,"click"),e.modules.html.scrollTo("#map"))}});for(var o=0;o<n.length;o++){var r=n[o],l=r.getPosition().lat(),s=r.getPosition().lng();if(i.lat==l&&i.lng==s&&r.getTitle()==a.title)return}var d=t.getInfoWindows(),c=$(".show-route-maps span:first").text(),u='<div id="content"><div id="siteNotice"></div><h4 class="firstHeading">'+a.title+'</h4><div id="bodyContent">'+a.address+"<p></p></div>"+'<a href="https://www.google.com/maps/dir/?api=1&destination='.concat(i.lat,",",i.lng)+'" target="_blank">'+c+"</a></div>",m=new google.maps.InfoWindow({content:u});d.push(m);var p=$(a.element).parents(".m-tabs-wrapper").data(),f=new google.maps.Marker({position:i,map:t.map,animation:google.maps.Animation.DROP,title:a.title,icon:t.icons[p.context].icon});n.push(f),f.addListener("click",function(){for(var e=0;e<d.length;e++)d[e].close(),n[e].setAnimation(null);m.open(t.map,f),null!==f.getAnimation()?f.setAnimation(null):f.setAnimation(google.maps.Animation.BOUNCE)}),m.addListener("closeclick",function(){f.setAnimation(null)})},e.modules.googlemaps.initMap=function(){if(document.getElementById("map")){var a=e.modules.googlemaps,t=e.modules.lokasi;a.removeRoute(),a.setAllMapMarkers(null),a.resetMarkers(),a.context=t.getContext(),a.map||(a.map=new google.maps.Map(document.getElementById("map"),{zoom:15,center:a.defaultCenter,zoomControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,disableDefaultUI:!0}),a.handleShowCurrentLocation()),a.setMapMarkers(a.map),a.markerBounds=new google.maps.LatLngBounds;for(var n=t.getMapLocation(),i=0;i<n.length;i++)a.createMark(n[i]);n.length||a.markerBounds.extend(new google.maps.LatLng(a.defaultCenter.lat,a.defaultCenter.lng)),a.map.fitBounds(a.markerBounds),a.directionsRenderer||(a.directionsRenderer=new google.maps.DirectionsRenderer({map:a.map}),google.maps.event.addListener(a.directionsRenderer,"directions_changed",function(){a.setAllMapMarkers(null),a.markerCluster.clearMarkers(),a.markerCluster.setMap(null)}))}},e.modules.googlemaps.handleShowCurrentLocation=function(){var a=e.modules.googlemaps;e.modules.lokasi;var t=new google.maps.InfoWindow({content:"Current Location"}),n=document.createElement("button");n.textContent="Pan to Current Location",n.classList.add("custom-map-control-button"),a.map.controls[google.maps.ControlPosition.TOP_RIGHT].push(n),n.addEventListener("click",()=>{t.setPosition(a.defaultCenter),t.open(a.map);var n="";n=a.defaultCenter==e.modules.lokasi.userLocation?$(".m-tabs-wrapper.active-state h2").data("destination"):$(".m-tabs-wrapper.active-state h2 span").text(),t.setContent(n+"<br/>("+a.defaultCenter.lat+","+a.defaultCenter.lng+")"),a.map.panTo(a.defaultCenter)})},e.modules.googlemaps.setMapMarkers=function(a){var t=e.modules.googlemaps.getMarkers();for(let n=0;n<t.length;n++)t[n].setMap(a);t.setMap&&t.setMap(a)},e.modules.googlemaps.setAllMapMarkers=function(a){var t=e.modules.googlemaps;for(k in t.markers){var n=t.markers[k];for(let i=0;i<n.length;i++)n[i].setMap(a);n.setMap&&n.setMap(a)}},e.modules.googlemaps.resetMarkers=function(){var a=e.modules.googlemaps;a.setAllMapMarkers(null),a.markerCluster&&a.markerCluster.setMap(null),a.markers=[],a.infoWindows=[],a.markerBounds=null,a.markerCluster=null},e.modules.googlemaps.displayRoute=function(a,t){var n=e.modules.googlemaps;n.directionsService||(n.directionsService=new google.maps.DirectionsService),n.directionsService.route({origin:a,destination:t,travelMode:google.maps.TravelMode.WALKING},function(e,a){"OK"===a?(n.setAllMapMarkers(null),n.directionsRenderer.setMap(n.map),n.directionsRenderer.setDirections(e)):window.alert("Directions request failed due to "+a)})},e.modules.googlemaps.removeRoute=function(){var a=e.modules.googlemaps;a.directionsRenderer&&a.directionsRenderer.setMap(null)},e.modules.googlemaps.removeCluster=function(){var a=e.modules.googlemaps;a.markerCluster&&a.markerCluster.setMap(null)},window.initMap=e.modules.googlemaps.initMap,e.modules.lokasi={userLocation:{lat:-6.1971113,lng:106.8227999},userSearch:{keyword:""}},e.modules.lokasi.getMapLocation=function(){return $(".content-result .active-state .m-maps-location-container-wrapper").map(function(e,a){return $.extend({element:a},$(a).data())}).toArray()},e.modules.lokasi.getDataContext=function(e){return e?$(".m-tabs-menu .m-tabs-part a[data-context="+e+"]").data():$(".m-tabs-menu .m-tabs-part .active").data()},e.modules.lokasi.getContext=function(){return $(".m-tabs-menu .m-tabs-part .active").data("context")},e.modules.lokasi.getCurrentLocation=function(a,t){var n=e.modules.lokasi;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(e){n.userLocation={lat:e.coords.latitude,lng:e.coords.longitude},a&&a(n.userLocation)},function(){if($(".alert-location").removeClass("hide"),a&&a(n.userLocation),t)return t()});else if(a&&a(n.userLocation),t)return t()},e.modules.lokasi.getItems=function(a,t,n){var i=e.modules.googlemaps,o=e.modules.lokasi,r=n||o.getDataContext(),l=o.userLocation,s=o.userSearch.keyword;o.userSearch&&(l=o.userSearch[r.context.concat("coordinate")]||o.userLocation,o.userSearch[r.context]&&(s=o.userSearch[r.context]));var d=$.extend({Context:r.context,ContextId:$(".m-tabs-container ".concat(r.target)).data("itemid"),Page:1,PageSize:r.pagesize,Radius:r.radius,Latitude:l.lat,Longitude:l.lng,Search:s,Filter:$.map($(".m-filter__dropdown-modal__content .group-choice."+r.context+" input:checked").toArray(),function(e){return e.value})},a);$.ajax({type:"POST",url:e.config.apiPath+"/lokasi/GetCard",data:{model:d},success:function(a){var t=$(".content-result ."+d.Context+" .m-maps-location-container"),n=$(".m-pagination."+d.Context).parent(),r=t.parents(".m-tabs-wrapper").hasClass("active-state");t.html(a),e.modules.html.scrollTo(".m-tabs-menu a.active"),r||t.find(".active-state").removeClass("active-state"),n.replaceWith(t.find(".m-pagination").parent()),o.handleAjaxPaging(".m-pagination."+d.Context),o.handleClickRoute(t),i.initMap()},complete:function(e,a){$("#loader").parent().addClass("none"),t&&t.apply(null,arguments)}})},e.modules.lokasi.handleAjaxPaging=function(a=".page-location .m-pagination"){var t=e.modules.lokasi,n=e.modules.pagination,i=e.modules.url;n.handleClick(function(e){e.preventDefault();var a=$(this);a.addClass("hide");var n=$('<i class="loader-spin is-active no-margin" style="margin: 0 !important">');a.parent().append(n);var o=a.attr("href"),r=i.parseQueryString(o.slice(1));return t.getItems(r,function(){a.removeClass("hide"),n.remove()}),!1},a)},e.modules.lokasi.handleTabChanged=function(){$(".page-location").parents("body").find(".m-tabs-part").on("click",function(a){var t=e.modules.googlemaps,n=e.modules.lokasi,i=$(this).find("a").data(),o=i.context;$(".m-filter__dropdown-modal__content .group-choice").removeClass("active-state"),$(".m-filter__dropdown-modal__content .group-choice."+o).addClass("active-state"),n.userSearch&&n.userSearch[o.concat("coordinate")]&&(t.defaultCenter=n.userSearch[o.concat("coordinate")]),t.initMap(),n.getItems({},null,i)})},e.modules.lokasi.handleManualSearch=function(){var a=e.modules.lokasi,t=e.modules.googlemaps,n=$("#locationFormSearch, #locationFormSearch-mobile"),i=n.prev(),o=n.next();n.off("submit").on("submit",function(e){e.preventDefault();var r=$(this);return t.defaultCenter=a.userLocation,t.resetMarkers(),$(".m-tabs-menu .m-tabs-part a").each(function(){var e=$(this).data();a.userSearch[e.context]=r.find("input.medium").val(),a.userSearch[e.context.concat("coordinate")]=t.defaultCenter;var n=a.userSearch[e.context];a.getItems({Search:n},null,e),a.setSearchTitle(e.context,n)}),o.removeClass("active"),i.removeClass("active"),n.removeClass("active"),$("body").removeClass("no-scroll"),!1})},e.modules.lokasi.setSearchTitle=function(e,a){a?$(".m-tabs-wrapper."+e+" .a-text-subtitle span").text(a):$(".m-tabs-wrapper."+e+" .a-text-subtitle span").text($(".m-tabs-wrapper."+e+" .a-text-subtitle").data("destination"))},e.modules.lokasi.handleMapSearch=function(){var a=e.modules.googlemaps,t=e.modules.lokasi,n=$("#locationFormSearch, #locationFormSearch-mobile"),i=n.prev(),o=n.next(),r=o.find(".m-filter__dropdown-modal__content-list"),l=[],s=$("#locationFormSearch, #locationFormSearch-mobile").find(".submit-form, .submit-form-mobile"),d=$(".location-search input, #locationFormSearch-mobile input");s.off("click").on("click",t.handleManualSearch),d.off("keyup focus").on("keyup focus",function(e){if(13===e.keyCode)e.preventDefault(),$(this).trigger("blur"),$(this).parents("form").submit();else{$("body").addClass("no-scroll"),$("li.location-result").remove();var s=$(this);s.val().length>0?new google.maps.places.AutocompleteService().getPlacePredictions({input:s.val(),componentRestrictions:{country:"id"}},function(e){e&&e.length>0?(l=e,e.map(function(e){e.id;var l=e.place_id,s=e.structured_formatting,d=e.description,c=$('\n                  <li class="location-result" data-location='.concat(l,'>\n                    <i class="a-system-icon icon-location mobile-only"></i>\n                    <span class="strong">').concat(s.main_text,"</span> ").concat(s.secondary_text||"","\n                  </li>\n                "));r.append(c),c.click(function(){t.userSearch={};var e=$(this).data("location");new google.maps.places.PlacesService(a.map).getDetails({placeId:e},function(e,n){var i=e.geometry.location;a.defaultCenter={lat:i.lat(),lng:i.lng()},a.resetMarkers(),$(".m-tabs-menu .m-tabs-part a").each(function(){var e=$(this).data();t.userSearch[e.context]="",t.userSearch[e.context.concat("coordinate")]=a.defaultCenter,t.getItems({},null,e)})}),$(".m-tabs-wrapper .a-text-subtitle span").text(s.main_text.concat(" ",s.secondary_text||"")),$("#locationSearching").prop("value",d),$(".JS__location-search-input-button .text").text(d).addClass("black"),o.removeClass("active"),i.removeClass("active"),n.removeClass("active"),$("body").removeClass("no-scroll")})}),"locationSearching"===s[0].id&&o.addClass("active")):(l=[],"locationSearching"===s[0].id&&o.removeClass("active"))}):"locationSearching"===s[0].id&&o.removeClass("active")}}),$(".JS__location-search-input-button").click(function(){i.addClass("active"),o.addClass("active"),$("#locationSearching-mobile").focus()})},e.modules.lokasi.handleClickRoute=function(a=".page-location"){$(a).find(".show-route-mobile").off("click").on("click",function(a){var t=e.modules.lokasi,n=e.modules.googlemaps;720>=$(window).width()&&$([document.documentElement,document.body]).animate({scrollTop:$(".m-maps").offset().top-60},500),a.preventDefault();var i=Number($(this).parent().attr("data-lat")),o=Number($(this).parent().attr("data-long"));n.displayRoute(t.userLocation,{lat:i,lng:o})})},e.modules.lokasi.handleFilter=function(){$(".page-location").parents("body").find(".form-filter .m-filter__dropdown-modal__footer a").on("click",function(){var a=$(this),t=$('<a class="'+a.attr("class")+'" href="javascript:void(0)"><i class="loader-spin is-active no-margin" style="margin-top: -10px"></a>');a.parent().append(t),a.addClass("hide"),e.modules.lokasi.getItems({},function(){a.removeClass("hide"),t.remove()})})},e.modules.lokasi.init=function(){if($(".page-location").length){var a=e.modules.lokasi,t=e.modules.googlemaps;a.getCurrentLocation(function(e){t.defaultCenter=e,$(".page-location").parents("body").find(".m-tabs-part .active").each(function(){var e=$(this).data();a.userSearch[e.context]=$("#locationFormSearch").find("input.medium").val(),a.userSearch[e.context.concat("coordinate")]=t.defaultCenter;var n=a.userSearch[e.context];a.getItems({Search:n},null,e),a.setSearchTitle(e.context,n)})}),a.handleTabChanged(),a.handleMapSearch(),a.handleManualSearch(),a.handleFilter(),a.handleClickRoute(),a.handleAjaxPaging()}},e.modules.landing={},e.modules.landing.handleTrigger=function(a=".pre-landing"){var t=$(a);t.hasClass("pre-landing")||(t=t.find(".pre-landing")),t.find(".pre-landing-search form").on("submit",function(a){a.preventDefault();var n=t.data("context")||"";return t.data(n.concat("page"),1),e.modules.landing.triggerLoad("#infinite-loading",!0),!1}),t.find(".pre-landing-filter .JS_filter-apply").on("click",function(a){var n=t.data("context")||"";t.data(n.concat("page"),1),e.modules.landing.triggerLoad("#infinite-loading",!0)}),t.find(".pre-landing-filter .JS_filter-reset").on("click",function(a){var n=t.data("context")||"";t.data(n.concat("page"),1),t.find(".filter-value-container input").each(function(){$(this).prop("checked",!1).change()}),e.modules.landing.triggerLoad("#infinite-loading",!0)}),t.find(".pre-landing-filter .m-filter__layout a").on("click",function(a){e.modules.landing.triggerLayoutChanged(t)});var n=function(a){a.preventDefault();var i=$(this);i.addClass("hide");var o=$('<i class="loader-spin is-active no-margin" style="margin: 0 !important">');i.parent().append(o);var r=i.attr("href"),l=e.modules.url.parseQueryString(r.slice(1).toLowerCase());return e.modules.landing.triggerLoad("#SKIPED",!1,l,function(){e.modules.pagination.handleClick(n,t)}),!1};e.modules.pagination.handleClick(n,t)},e.modules.landing.handleAjaxTrigger=function(a=".pre-landing"){var t=$(a);t.hasClass("pre-landing")||(t=t.find(".pre-landing"));var n=function(a){a.preventDefault();var n=$(this);n.addClass("hide");var i=$('<i class="loader-spin is-active no-margin" style="margin: 0 !important">');n.parent().append(i);var o=n.attr("href"),r=e.modules.url.parseQueryString(o.slice(1).toLowerCase());return e.modules.landing.triggerLoad("#SKIPED",!1,r,function(){e.modules.html.scrollTo(t)}),!1};e.modules.pagination.handleClick(n,t)},e.modules.landing.triggerLayoutChanged=function(e=".pre-landing"){var a=$(e),t=a.find(".pre-landing-calendar-date"),n=a.find(".pre-landing-calendar-reflected-date"),i=a.find("a[data-target="+n.attr("id")+"]");if("date"==$(".m-filter__layout-button.active-btn").data("typeList")){t.addClass("filter-enabled"),n.addClass("filter-disabled").removeClass("active"),i.addClass("hide"),i.parent().prev().find("a").click(),t.find(".filter-value-container input").remove();var o=$(".vanilla-calendar-month-selector option:selected").val(),r=$(".vanilla-calendar-year-selector option:selected").val();if(!o||!r)return;o=parseInt(o)+1;var l=new Date(r,o,0).getDate(),s=[r.concat("-").concat(o).concat("-").concat(1),r.concat("-").concat(o).concat("-").concat(l)];$.each(s,function(e,a){var n=$('<input type="text" class="filter-values" value="'+a+'">');t.find(".filter-value-container").append(n)})}else t.removeClass("filter-enabled"),n.removeClass("filter-disabled"),i.removeClass("hide"),t.find(".filter-value-container input").remove()},e.modules.landing.triggerLoad=function(a="#infinite-loading",t=!1,n=null,i){$(a).each(function(){var e=$(this).data("fninfiniteload");e&&"function"==typeof e&&e(t)});var o=$(".pre-landing-calendar").data("fnLoadData");o&&"function"==typeof o&&o(t),$(a).length||e.modules.landing.getData(function(a){e.modules.landing.render(a)},".pre-landing",n,i)},e.modules.landing.getCriteria=function(e=".pre-landing"){var a=$(e);a.hasClass("pre-landing")||(a=a.find(".pre-landing"));var t=[],n=function(e){var a=null;return $(e).find(".filter-data").each(function(){a||(a={SortedList:[]});var e=$(this),t=this.className.split(/\s+/);$.each(t,function(t,n){if(n.startsWith("filter")){var i=n.replace("filter-","");a[i=i.charAt(0).toUpperCase()+i.slice(1)]=e.val()}})}),$(e).find(".filter-data-sort-container").each(function(){var e=null;$(this).find(".filter-data-sort").each(function(){a||(a={SortedList:[]});var t=$(this),n=this.className.split(/\s+/);$.each(n,function(a,n){e||(e={}),n.startsWith("filter-sort-")&&(e[n.replace("filter-sort-","")]=t.val())})}),e&&a.SortedList.push(e)}),a&&(a.Values=$(e).find(".filter-values:checked").map(function(){return $(this).val()}).toArray()),a},i=a.find(".pre-landing-search .filter-values").val();if(i&&""!=i){/^[^a-zA-Z0-9]+$/.test(i)&&(i="SPECIALCHARACTERNOTALLOWED");var o=n(a.find(".pre-landing-search .filter-data-container"));o&&(o.Values=[i],t.push(o))}var r=a.find(".pre-landing-filter .filter-data-container .filter-values:checked:not(.filter-exclude)").map(function(){return $(this).parents(".filter-data-container").hasClass("filter-disabled")?"filter-skip":$(this).parents(".filter-data-container").attr("id")}).toArray();return r=$.unique(r),$.each(r,function(){var e=$("#"+this),a=n(e);a&&t.push(a)}),a.find(".pre-landing-filter .filter-hidden .filter-data-container.filter-enabled").each(function(){var e=$(this),a=n(e);a&&(e.hasClass("filter-skip-check-criteria")&&(a.SkipCheckCriteria=!0),a.Values=$(this).find(".filter-value-container input").map(function(){return $(this).val()}).toArray(),t.push(a))}),t},e.modules.landing.render=function(e,a=null,t=null,n=".pre-landing"){t||(t=$(n).data("resultcontainer")),null==a&&(a=$(n).data("resultmethod")),a?$(t).replaceWith(e):$(t).html(e)},e.modules.landing.getData=function(a,t=".pre-landing",n={overridecontext:!0},i=null){var o=$(t);o.hasClass("pre-landing")||(o=o.find(".pre-landing"));var r=o.data("context")||"",l=$.extend({bucketid:o.data(r.concat("bucket")),datasourceid:o.data(r.concat("datasource")),dataType:"ListData",page:o.data(r.concat("page")),pageSize:o.data(r.concat("pagesize")),criteria:e.modules.landing.getCriteria(t)},n);$.ajax({type:"POST",url:e.config.apiPath+o.data(r.concat("api")),data:l,success:function(t){a&&"function"==typeof a&&a(t),e.modules.landing.handleAjaxTrigger();var i=t;if(i.pageIndex||(i=$(o.data("resultcontainer")).data()||{}),i.pageIndex&&i.source&&i.source.length>0&&n&&n.overridecontext&&o.data(r.concat("page"),i.pageIndex+1),1==i.pageIndex&&"ListData"==l.dataType){if($(".btn-load-more").removeClass("hide"),$(o.data("resultcontainer")).find(".m-pagination").removeClass("hide"),l.criteria.length&&l.criteria.filter(function(e){return!e.SkipCheckCriteria}).length){o.parent().find(".section-banner").addClass("hide"),o.parent().find(".m-video-information.m-video-information").addClass("hide");var s=o.parent().find(".filter-information");s.text(i.totalCount+" "+s.data("result"));var d=o.find(".pre-landing-search .filter-values:first").val();d&&""!=d&&s.text(i.totalCount+" "+s.data("result")+" "+s.data("keyword")+' "'+d+'" '),i.source&&(i.source.length?(s.next().addClass("hide"),s.next().find(".filter-information-keyword").addClass("hide")):(s.next().removeClass("hide"),s.next().find(".filter-information-keyword").removeClass("hide"),$(o.data("resultcontainer")).find(".m-pagination").addClass("hide")))}else{o.parent().find(".section-banner").removeClass("hide"),o.parent().find(".m-video-information.m-video-information").removeClass("hide");var s=o.parent().find(".filter-information");s.text(s.data("title")),s.next().addClass("hide"),s.next().find(".filter-information-no-result").addClass("hide")}}if(i.pageIndex>1&&"ListData"==l.dataType){var c=Math.ceil(i.totalCount/i.pageSize);i.pageIndex>=c&&$(".btn-load-more").addClass("hide")}},complete:function(e,a){i&&"function"==typeof i&&i(e,a)},error:function(e,t,n){if(a&&"function"==typeof a){var i=[];i.source=[],a(i)}}})},e.modules.landing.getCalendarData=function(a){!$(".pre-landing-calendar").length||require("js/calendarData.js").default.init["".concat(a.year).concat(a.month)]&&require("js/calendarData.js").default.init["".concat(a.year).concat(a.month)].code||e.modules.landing.getData(function(e){e&&e.length>0&&(require("js/calendarData.js").default.init["".concat(a.year).concat(a.month)]={status:"success",code:1,data:e})},".pre-landing",{page:0,dataType:"CalendarData",pageSize:0,overridecontext:!1})},e.modules.landing.handleGeoLocation=function(a=".pre-landing"){var t=$(a);if(t.hasClass("pre-landing")||(t=t.find(".pre-landing")),t.find(".filter-geo-location").length){var n="geolocation",i=t.find(".filter-geo-location"),o=t.find(".filter-geo-location-reflected .filter-value-container:first"),r=$('<li class="filter-value-container filter-exclude">').append($('<input type="checkbox" id="'+n+'" class="filter-data filter-values filter-exclude" name="'+o.find("input").attr("name")+'" value="Nearme">')).append($('<label class="va-middle" for="'+n+'">'+i.find(".filter-title").val()+"</label>")).append($('<div class="radio"></div>'));t.find(".filter-geo-location-reflected").prepend(r),o.find(".filter-value-container").hasClass("checkbox-custom")?r.addClass("checkbox-custom"):(r.addClass("radio-custom"),r.find("input").attr("type","radio")),t.find(".filter-geo-location-reflected .filter-value-container input").on("change",function(){var e=$(this);"Nearme"==e.val()&&e.prop("checked")?i.addClass("filter-enabled"):i.removeClass("filter-enabled")});var l=r.parent().find(".filter-query");if(l.length){var s=l.val().split(","),d=r.find("input");s.includes(i.find(".filter-key").val())?d.attr("checked","checked"):d.removeAttr("checked")}e.modules.lokasi.getCurrentLocation(function(a){e.modules.landing.handleGeoCoordinate(t,a)})}},e.modules.landing.handleGeoCoordinate=function(e,a){var t=e.data("context")||"",n=e.find(".filter-geo-location");n.find(".filter-values:eq(0)").val(a.lat),n.find(".filter-values:eq(1)").val(a.lng),n.find(".filter-values:eq(2)").val(e.data(t.concat("radius")))},e.modules.landing.hanleContinousYear=function(e=".pre-landing"){var a=$(e);a.hasClass("pre-landing")||(a=a.find(".pre-landing"));var t=a.find(".pre-landing-continous-year");if(t.length){var n=t.find(".filter-value-container:first");n.find(".filter-values").attr("name",t.attr("id"));var i=a.data("startyear");n.find(".filter-values").val(i),n.find("label").text(i);var o=new Date().getFullYear();if(i){for(var r=n.parent().find(".filter-query").val().split(","),l=parseInt(i),s=l;s<o;s++){l+=1;var d=$('<li class="filter-value-container">').append('<input type="checkbox" class="filter-values" id="filteryear2018" name="filteryear" value="2018">').append('<label class="va-middle newsroomYear" for="filteryear2018">2018</label>').append('<div class="radio"></div>');n.hasClass("checkbox-custom")?d.addClass("checkbox-custom"):(d.addClass("radio-custom"),d.find("input").attr("type","radio")),d.find(".filter-values").val(l).attr("id","pofilteryear".concat(l)).attr("name",t.attr("id")),d.find("label").text(l).attr("for","pofilteryear".concat(l)),r.includes("".concat(l))&&d.find(".filter-values").attr("checked","checked"),t.append(d)}r.includes(i)&&n.find(".filter-values").attr("checked","checked")}}},e.modules.landing.init=function(){$(".pre-landing").length&&(e.modules.landing.handleTrigger(),e.modules.landing.handleAjaxTrigger(),e.modules.landing.handleGeoLocation(),e.modules.landing.hanleContinousYear())},e.modules.reportsubscribe={init:function(){var a=function(){for(var e=0,a=document.querySelectorAll(".checkbox-custom>input"),t=0;t<a.length;t++)a[t].checked&&e++;return console.log(e),e};$(".btn-subscribe-report").on("click",function(){var t=$("#email_contact").val(),n=a(),i=e.modules.validations.email(t),o=$("#report-data");let r=$("#reportv3subcribe").data("captchatype"),l="",s="",d="",c="";if("Enterprise"!=r?l=grecaptcha.getResponse():(s=r,d=$("#reportv3subcribe").data("action"),c=$('meta[name="siteverification"]').attr("content")),$(".email-subs").text(""),$(".g-recaptcha-subs").text(""),$(".checkbox-subs").text(""),i){if(0==n){var u=$("#checkbox-msg").data("msg");$(".checkbox-subs").removeClass("is-valid").addClass("is-invalid").text(u)}else if(0==l.length&&0==e.modules.ajax.disabledReCAPTCHA&&"Checkbox"==s){var u=$("#g-recaptcha-msg").data("msg");$(".g-recaptcha-subs").removeClass("is-valid").addClass("is-invalid").text(u)}else{for(var m=[],p=document.querySelectorAll(".checkbox-custom>input"),f=0;f<p.length;f++)p[f].checked&&m.push({Email:t,ReportId:p[f].id,ReportName:p[f].getAttribute("data-label")});$.ajax({type:"POST",url:e.config.apiPath+"/forms_bca/subscribereport",data:{entities:m,formatId:o.data("format"),verifyId:o.data("verid"),tokenRange:o.data("range")},beforeSend:function(a,t){if(0==e.modules.ajax.disabledReCAPTCHA){if("Enterprise"==r)return e.modules.recaptcha.ajax.beforeSend(a,t,{captchatype:s,sitekey:c,action:d});e.modules.recaptcha.ajax.setSiteVerification(a,l),$(".btn-subscribe-report #subscribe-loader").addClass("is-active"),$(".btn-subscribe-report span").css({display:"none"})}},success:function(e){if(e.IsValid){$(".email-subs").removeClass("is-invalid").addClass("is-valid").text(o.find(".success").text()),$(".g-recaptcha-subs").removeClass("is-invalid").addClass("is-valid"),$(".checkbox-subs").removeClass("is-invalid").addClass("is-valid");var a=o.data("link");a&&window.location.replace(a)}else $(".email-subs").removeClass("is-valid").addClass("is-invalid").html(e.Message.replace(/\n/g,"<br/>"))},error:function(e,a,t){$(".email-subs").removeClass("is-valid").addClass("is-invalid").html("Not Authorized")},complete:function(e,a){$(".btn-subscribe-report #subscribe-loader").removeClass("is-active"),$(".subscribe-btn").removeClass("hide"),$(".btn-subscribe-report span").css({display:"block"}),$(".subscribe-btn").parent().removeAttr("disabled")}})}}else{var u=$("#email-msg").data("msg");$(".email-subs").removeClass("is-valid").addClass("is-invalid").text(u)}})}},e.modules.merchant={},e.modules.merchant.init=function(){if($(".landing-merchant .filter-geo-location").length){var a=$(".landing-merchant");a.hasClass("pre-landing")||(a=a.find(".pre-landing")),e.modules.lokasi.getCurrentLocation(function(t){e.modules.landing.handleGeoCoordinate(a,t),e.modules.landing.triggerLoad("#infinite-loading",!0)})}},e.modules.recaptcha={widgetid:null,tokenStatus:0,ajax:{}},e.modules.recaptcha.callbacks=[],e.modules.recaptcha.execute=function(a){var t=e.modules.recaptcha;t.tokenStatus||(t.tokenStatus=1,"Enterprise"==a.captchatype?grecaptcha.enterprise.ready(function(){grecaptcha.enterprise.execute(a.sitekey,{action:a.action}).then(function(e){t.tokenResolve(e,a)}).catch(e=>console.log(e))}):grecaptcha.ready(function(){t.render(a.captchatype),grecaptcha.reset(),grecaptcha.execute(t.widgetid)}))},e.modules.recaptcha.render=function(a){if("Enterprise"!=a&&!$(".g-recaptcha-invisible").length){var t=e.modules.recaptcha,n="recaptcha"+$.guid++;$('<div class="g-recaptcha g-recaptcha-invisible hide"></div >').attr("id",n).appendTo("body");var i=$('meta[name="siteverification"]').attr("content");t.widgetid=grecaptcha.render(n,{sitekey:i,callback:e=>t.tokenResolve(e,a),size:"invisible"})}},e.modules.recaptcha.ajax.disabledReCAPTCHA=$(".footer-content.footer-content-subscribe").data("usecaptcha"),e.modules.recaptcha.ajax.beforeSend=function(a,t,n){if(t.disabledReCAPTCHA)return!0;try{var i=t.complete,o=function(a){a||"Enterprise"==n.captchatype||(a=grecaptcha.getResponse()),e.modules.recaptcha.ajax.setSiteVerification(t,a),t.disabledReCAPTCHA=1,t.complete=i,$.ajax(t)},r=e.modules.recaptcha;return r.callbacks.push(o),r.execute(n),!1}catch(l){}return!0},e.modules.recaptcha.ajax.setSiteVerification=function(e,a){e.setRequestHeader?e.setRequestHeader("Authorization","reCAPTCHA "+a):e.headers={Authorization:"reCAPTCHA "+a}},e.modules.recaptcha.tokenResolve=function(a,t){var n=e.modules.recaptcha;n.tokenStatus=0;try{n.callbacks.length&&((0,n.callbacks[0])(a),n.callbacks=n.callbacks.slice(1,n.callbacks.length)),n.callbacks.length&&n.execute(t)}catch(i){}},e.modules.ajax={},e.modules.ajax.disabledReCAPTCHA=e.modules.recaptcha.ajax.disabledReCAPTCHA,$.ajaxSetup(e.modules.ajax),e.modules.html={},e.modules.html.scrollTo=function(e){var a=$(e).offset();window.scrollTo(a.left,a.top)},e.init=function(){for(var a in e.modules)e.modules[a].init&&"function"==typeof e.modules[a].init&&e.modules[a].init()},e.ready||(e.ready=function(e){$(function(){e()})}),e.ready(e.init)}(bca);