const _scrollToAnchor=e=>{$("html,body").scrollTop($(e).offset().top)};function delay(e,t){var a=0;return function(){var r=this,s=arguments;clearTimeout(a),a=setTimeout(function(){e.apply(r,s)},t||0)}}const search_query=document.querySelectorAll(".a-smart-search_input"),search_button=document.querySelectorAll(".a-smart-search_submit");function disablingButton(){for(let e=0;e<search_query.length;e++)null!=search_query[e]&&null!=search_button[e]&&(null!=search_query[e].value&&""!=search_query[e].value&&0!=search_query[e].value.indexOf(" ")?search_button[e].removeAttribute("disabled"):search_button[e].setAttribute("disabled",!0))}function pushDataLayer(){for(let e=0;e<search_query.length;e++)null!=search_query[e]&&null!=search_button[e]&&null!=search_query[e].value&&""!=search_query[e].value&&0!=search_query[e].value.indexOf(" ")&&dataLayer.push({event:"sitesearch",search_query:search_query[e].value})}let sxaSearch=(()=>{pushDataLayer();let e=document.querySelectorAll(".promo-nav"),t="/api/sitecore/SXASearch/GetResults",a=()=>{$(".m-tabs-item a").off("click")},r=()=>{e.forEach(e=>e.addEventListener("click",e=>{let t=document.querySelector(".page-search-result .search-result_input").value,a=e.target.getAttribute("data-tag"),r=e.currentTarget.getAttribute("data-count"),l=document.querySelector(".page-search-result .search-filter-loader");""!==r&&"0"!==r?null==l&&s(e.currentTarget,e.target,t,a,'<i class="loader-spin is-active no-margin search-filter-loader" style="margin: 0 !important; display:inherit">'):e.target.classList.contains("active")&&e.target.classList.remove("active")}))},s=(t,a,r,s,l)=>{e.forEach((e,t,r,s=a)=>{let l=null;Array.from(e.children).forEach(e=>{if("a"===e.tagName.toLowerCase())return l=e,!0}),null!==l&&l!=s&&(l.classList.contains("active")&&l.classList.remove("active"),void 0!==l.nextElementSibling&&l.nextElementSibling.classList.contains("active")&&l.nextElementSibling.classList.remove("active"))});let n=null;a.classList.contains("active")||a.classList.add("active"),Array.from(t.children).forEach(e=>{if(e.classList.contains("badge-opt"))return n=e,!0}),null===n||n.classList.contains("active")||(n.classList.add("active"),n.classList.contains("none")||n.classList.add("none"),t.insertAdjacentHTML("beforeend",l),o(r,s,!1))},l=()=>{let e=document.querySelectorAll(".page-search-result .search-filter-loader"),t=document.querySelectorAll(".page-search-result .search-result .badge-opt");null!=e&&e.forEach(e=>{e.remove()}),null!=t&&t.forEach(e=>{e.classList.contains("none")&&e.classList.remove("none")})},n=(e,t)=>{let a=document.querySelectorAll(".page-search-result .promo-tab");a.forEach((a,r)=>{let s=a.getAttribute("data-tag");a.classList.contains("show")&&(a.classList.remove("show"),a.classList.add("hide")),s===e&&1===t&&(a.classList.remove("hide"),a.classList.add("show"))})},i=(e,a,r,s,l,n=!1)=>{let i;"header"===a?i=JSON.parse(document.querySelector(".header-search_form .m-smart-search_form").getAttribute("data-properties")):"banner"===a?i=JSON.parse(document.querySelector(".banner-search_form.m-smart-search_form").getAttribute("data-properties")):"result"===a&&(i=JSON.parse(document.querySelector(".search-result_form.m-smart-search_form").getAttribute("data-properties"))),i._query=e,i._isSmartSearch=!0,fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}).then(e=>200==e.status?e.json():404==e.status?"<p id='apicantreach'>Api cannot found.</p>":"<p id='apicantreach'>Ups... Api cannot be reached.</p>").then(e=>{c(e.Results,r,s,l,n)}).catch(e=>{})},c=(e,t,a,r,s)=>{let l="";e.forEach((e,t)=>{l+=`<li><a href="${e.link}"><button class="a-smart-search_suggestion-option">${e.title}</button></a></li>`}),t.children("ul").empty(),t.children("ul").append(l),e.length>0?(s?a.hasClass("hide")&&a.removeClass("hide"):r.hasClass("hide")&&r.removeClass("hide"),a.addClass("suggestion"),r.addClass("suggestion")):(s?a.addClass("hide"):r.addClass("hide"),a.removeClass("suggestion"),r.removeClass("suggestion"))},o=(e,a,r,s=1,i=!1)=>{let c=document.querySelector(".page-search-result .result-wrapper .tab-menu"),o=[];"all"!==a&&o.push(a);let d=JSON.parse(document.querySelector("form.search-result_form").getAttribute("data-properties"));i?d._isSmart=i:(d._tagsName=o,d._currentPage=r?s:1,d._isFilter="all"!==a),d._query=document.getElementById("CurrentQuery").value,d._totalResult=document.getElementById("CurrentTotalResult").value,d._textsearch=document.querySelector(".conSearchTextRslt").getAttribute("data-searchtext"),d._isPaging=r,fetch(i?t:"/api/sitecore/SXASearch/SearchResultPaging",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(d)}).then(e=>200==e.status?i?e.json():e.text():404==e.status?"<p id='apicantreach'>Api cannot found.</p>":"<p id='apicantreach'>Ups... Api cannot be reached.</p>").then(e=>{if(i)return e.Results;u(e),n(a,s),h(),l(),_scrollToAnchor(c),r||(document.getElementById("CurrentTotalResult").value=document.getElementById("TotalResultChangeCategory").value)}).catch(e=>{})},u=e=>{let t=document.querySelector(".page-search-result .result-sum.corrected-spell"),a=document.querySelector(".page-search-result .result-sum.a-text-subtitle"),r=document.querySelector(".page-search-result .result-sum.summary-text");document.querySelector(".page-search-result .result-wrapper");let s=document.querySelector(".page-search-result #searchResult");document.querySelector(".page-search-result .result-wrapper .tab-menu");let l=document.querySelector(".page-search-result .search-pagination"),n=document.querySelector(".search-result-top"),i=document.querySelector(".search-result-bottom"),c=document.querySelector("#no-result"),o=document.querySelector("#apicantreach");null!==t&&t.remove(),null!==o&&o.remove(),null!==a&&a.remove(),null!==r&&r.remove(),null!==s&&s.remove(),null!==l&&l.remove(),null!==c&&c.remove();var u=e.split(/(?=<div class="search-pagination bg-white pt-md-0 pb-32">)/g);n.insertAdjacentHTML("afterend",u[0]),null!=u[1]&&i.insertAdjacentHTML("beforebegin",u[1])},h=()=>{let e=document.querySelector(".page-search-result .promo-nav a.active"),t=document.querySelector(".page-search-result .search-pagination .m-pagination"),a=document.querySelector(".page-search-result .search-pagination .a-pagination_item.previous button:not([disabled])"),r=document.querySelector(".page-search-result .search-pagination .a-pagination_item.next button:not([disabled])"),s=document.querySelectorAll(".page-search-result .search-pagination .a-pagination_item.number:not(.is-active)"),l=document.querySelector(".page-search-result .search-pagination .a-pagination_item.less"),n=document.querySelector(".page-search-result .search-pagination .a-pagination_item.more"),i=document.querySelectorAll(".page-search-result .search-pagination .a-pagination_item");null!=i&&i.forEach(e=>{null==e.querySelector("button:not([disabled])")||e.classList.contains("is-active")||e.addEventListener("click",t=>{e.insertAdjacentHTML("beforeend",'<i class="loader-spin is-active no-margin search-paging-loader" style="margin: 0 !important">')})});let c=document.querySelector(".page-search-result .search-result_input").value,u=e.getAttribute("data-tag"),h=document.querySelector(".search-pagination .m-pagination"),d=null!=h?h.getAttribute("data-showpaging"):"",g=""!=d?parseInt(d):4;null!=s&&s.forEach(e=>{e.addEventListener("click",t=>{let a=parseInt(t.target.textContent);e.firstElementChild.classList.add("hide"),o(c,u,!0,a)})}),null!=a&&a.addEventListener("click",()=>{let e=parseInt(t.getAttribute("data-curpage"))-1;a.classList.add("hide"),o(c,u,!0,e)}),null!=r&&r.addEventListener("click",()=>{let e=parseInt(t.getAttribute("data-curpage"))+1;r.classList.add("hide"),o(c,u,!0,e)}),null!=l&&l.addEventListener("click",()=>{let e=parseInt(t.getAttribute("data-curpage"))-g;e<=0&&(e=1),l.firstElementChild.classList.add("hide"),o(c,u,!0,e)}),null!=n&&n.addEventListener("click",()=>{let e=parseInt(t.getAttribute("data-curpage"))+g,a=parseInt(t.getAttribute("data-maxpage"));e>a&&(e=a),n.firstElementChild.classList.add("hide"),o(c,u,!0,e)})},d=()=>{let e=$(".header-search_form"),t=e.children(".m-smart-search_form").children(".a-smart-search_input"),a=e.children(".m-smart-search_suggestion-wrapper"),r=a.children(".m-smart-search_suggestion"),s=a.children().children(".popular-list"),l=a.children().children(".suggestion-list");t.on("keyup",delay(function(e){var t=$(this).val();0==t.length&&(r.removeClass("suggestion"),s.removeClass("suggestion")),t.length>0&&i(t,"header",l,r,s)},500))},g=()=>{let e=$(".banner-search_form.m-smart-search_form").children(".a-smart-search_input"),t=$(".banner-search_suggestion-wrapper.m-smart-search_suggestion-wrapper"),a=t.children(".m-smart-search_suggestion"),r=t.children().children(".popular-list"),s=t.children().children(".suggestion-list");e.on("keyup",delay(function(e){var t=$(this).val();0==t.length&&(a.removeClass("suggestion"),r.removeClass("suggestion")),t.length>0&&i(t,"banner",s,a,r)},500))},p=()=>{let e=$(".search-result_form.m-smart-search_form").children(".a-smart-search_input"),t=$(".search-result_suggestion-wrapper.m-smart-search_suggestion-wrapper"),a=t.children(".m-smart-search_suggestion"),r=t.children().children(".popular-list"),s=t.children().children(".suggestion-list");e.on("keyup",delay(function(e){var t=$(this).val();0==t.length&&(a.removeClass("suggestion"),r.removeClass("suggestion")),t.length>0&&i(t,"result",s,a,r,!0)},500))},m=()=>{null!=document.querySelector(".page-search-result")&&(a(),r(),h()),d(),g(),p()};return{init:m}})();document.addEventListener("DOMContentLoaded",()=>{sxaSearch.init(),disablingButton()});